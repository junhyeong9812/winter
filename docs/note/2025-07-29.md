# Winter Framework - Multipart Parser ì™„ì „ ë¶„ì„

## ğŸ“‹ ëª©ì°¨

1. [Multipart/Form-Data ê¸°ë³¸ ê°œë…](#1-multipartform-data-ê¸°ë³¸-ê°œë…)
2. [HTTP Multipart êµ¬ì¡° ë¶„ì„](#2-http-multipart-êµ¬ì¡°-ë¶„ì„)
3. [Boundaryì˜ ì—­í• ê³¼ ì˜ë¯¸](#3-boundaryì˜-ì—­í• ê³¼-ì˜ë¯¸)
4. [CRLF(Carriage Return Line Feed)ì˜ ì¤‘ìš”ì„±](#4-crlfcarriage-return-line-feedì˜-ì¤‘ìš”ì„±)
5. [MultipartParser ì½”ë“œ ìƒì„¸ ë¶„ì„](#5-multipartparser-ì½”ë“œ-ìƒì„¸-ë¶„ì„)
6. [íŒŒì¼ ì—…ë¡œë“œ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#6-íŒŒì¼-ì—…ë¡œë“œ-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
7. [í•µì‹¬ ì§ˆë¬¸ë“¤ì— ëŒ€í•œ ë‹µë³€](#7-í•µì‹¬-ì§ˆë¬¸ë“¤ì—-ëŒ€í•œ-ë‹µë³€)

---

## 1. Multipart/Form-Data ê¸°ë³¸ ê°œë…

### 1.1 ì™œ Multipartê°€ í•„ìš”í•œê°€?

ì¼ë°˜ì ì¸ HTTP POST ìš”ì²­ì€ `application/x-www-form-urlencoded` í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤:
```
name=John&age=25&email=john@example.com
```

í•˜ì§€ë§Œ **íŒŒì¼ì„ ì—…ë¡œë“œ**í•  ë•ŒëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤:
- **ë°”ì´ë„ˆë¦¬ ë°ì´í„°**: ì´ë¯¸ì§€, ë™ì˜ìƒ ë“±ì€ í…ìŠ¤íŠ¸ê°€ ì•„ë‹Œ ë°”ì´ë„ˆë¦¬ ë°ì´í„°
- **ë©”íƒ€ë°ì´í„° í•„ìš”**: íŒŒì¼ëª…, MIME íƒ€ì… ë“±ì˜ ì¶”ê°€ ì •ë³´ í•„ìš”
- **í˜¼í•© ë°ì´í„°**: íŒŒì¼ê³¼ ì¼ë°˜ í…ìŠ¤íŠ¸ í•„ë“œë¥¼ í•¨ê»˜ ì „ì†¡í•´ì•¼ í•¨

### 1.2 Multipartì˜ í•´ê²°ì±…

`multipart/form-data`ëŠ” ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **ì—¬ëŸ¬ ë¶€ë¶„(parts)ìœ¼ë¡œ ë‚˜ëˆ„ì–´** ë°ì´í„°ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤:

```http
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="username"

john_doe
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="avatar"; filename="profile.jpg"
Content-Type: image/jpeg

[ë°”ì´ë„ˆë¦¬ ì´ë¯¸ì§€ ë°ì´í„°...]
------WebKitFormBoundary7MA4YWxkTrZu0gW--
```

---

## 2. HTTP Multipart êµ¬ì¡° ë¶„ì„

### 2.1 Multipart ë©”ì‹œì§€ì˜ êµ¬ì„± ìš”ì†Œ

```
1. HTTP í—¤ë”
   â”œâ”€â”€ Content-Type: multipart/form-data; boundary=XXX
   â””â”€â”€ Content-Length: [ì „ì²´ í¬ê¸°]

2. ë©”ì‹œì§€ ë³¸ë¬¸
   â”œâ”€â”€ ì‹œì‘ boundary (--XXX)
   â”œâ”€â”€ Part 1
   â”‚   â”œâ”€â”€ Part í—¤ë” (Content-Disposition, Content-Type ë“±)
   â”‚   â”œâ”€â”€ ë¹ˆ ì¤„ (CRLF)
   â”‚   â””â”€â”€ Part ë°ì´í„°
   â”œâ”€â”€ êµ¬ë¶„ boundary (--XXX)
   â”œâ”€â”€ Part 2
   â”‚   â”œâ”€â”€ Part í—¤ë”
   â”‚   â”œâ”€â”€ ë¹ˆ ì¤„ (CRLF)
   â”‚   â””â”€â”€ Part ë°ì´í„°
   â”œâ”€â”€ êµ¬ë¶„ boundary (--XXX)
   â””â”€â”€ ì¢…ë£Œ boundary (--XXX--)
```

### 2.2 ì‹¤ì œ ì˜ˆì‹œ

```http
POST /upload HTTP/1.1
Host: localhost:8080
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Length: 12345

------WebKitFormBoundary7MA4YWxkTrZu0gW\r\n
Content-Disposition: form-data; name="description"\r\n
\r\n
ì‚¬ìš©ì í”„ë¡œí•„ ì‚¬ì§„ì…ë‹ˆë‹¤\r\n
------WebKitFormBoundary7MA4YWxkTrZu0gW\r\n
Content-Disposition: form-data; name="file"; filename="profile.jpg"\r\n
Content-Type: image/jpeg\r\n
\r\n
[JPEG ë°”ì´ë„ˆë¦¬ ë°ì´í„°...]\r\n
------WebKitFormBoundary7MA4YWxkTrZu0gW--\r\n
```

---

## 3. Boundaryì˜ ì—­í• ê³¼ ì˜ë¯¸

### 3.1 Boundaryë€?

**Boundary**ëŠ” multipart ë©”ì‹œì§€ì—ì„œ **ê° partë¥¼ êµ¬ë¶„í•˜ëŠ” êµ¬ë¶„ì**ì…ë‹ˆë‹¤.

#### íŠ¹ì§•:
- **ê³ ìœ ì„±**: ë©”ì‹œì§€ ë‚´ìš©ì— ë‚˜íƒ€ë‚˜ì§€ ì•ŠëŠ” ê³ ìœ í•œ ë¬¸ìì—´
- **RFC ê·œì¹™**: ìµœëŒ€ 70ì, ì˜ìˆ«ìì™€ ì¼ë¶€ íŠ¹ìˆ˜ë¬¸ìë§Œ ì‚¬ìš©
- **ìë™ ìƒì„±**: ë¸Œë¼ìš°ì €ë‚˜ í´ë¼ì´ì–¸íŠ¸ê°€ ìë™ìœ¼ë¡œ ìƒì„±

### 3.2 Boundaryì˜ í˜•íƒœ

```
ê¸°ë³¸ í˜•íƒœ: ----WebKitFormBoundary7MA4YWxkTrZu0gW
êµ¬ë¶„ í˜•íƒœ: ------WebKitFormBoundary7MA4YWxkTrZu0gW     (ì•ì— --)
ì¢…ë£Œ í˜•íƒœ: ------WebKitFormBoundary7MA4YWxkTrZu0gW--   (ë’¤ì—ë„ --)
```

### 3.3 íŒŒì‹±ì—ì„œ Boundary ì²˜ë¦¬

```java
// 1. Content-Typeì—ì„œ boundary ì¶”ì¶œ
String boundary = extractBoundary(contentType);
// "----WebKitFormBoundary7MA4YWxkTrZu0gW"

// 2. íŒŒì‹±ìš© êµ¬ë¶„ì ìƒì„±
String delimiter = "--" + boundary;
// "------WebKitFormBoundary7MA4YWxkTrZu0gW"

String endDelimiter = delimiter + "--";
// "------WebKitFormBoundary7MA4YWxkTrZu0gW--"
```

---

## 4. CRLF(Carriage Return Line Feed)ì˜ ì¤‘ìš”ì„±

### 4.1 CRLFë€?

- **CR (Carriage Return)**: `\r` (ASCII 13)
- **LF (Line Feed)**: `\n` (ASCII 10)
- **CRLF**: `\r\n` - HTTP í‘œì¤€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì¤„ë°”ê¿ˆ

### 4.2 ìš´ì˜ì²´ì œë³„ ì¤„ë°”ê¿ˆ ì°¨ì´

```
Windows: \r\n (CRLF)
Unix/Linux: \n (LF)
Mac (êµ¬ë²„ì „): \r (CR)
HTTP í‘œì¤€: \r\n (CRLF) â† ë°˜ë“œì‹œ ì´ê²ƒì„ ì‚¬ìš©!
```

### 4.3 CRLFê°€ ì¤‘ìš”í•œ ì´ìœ 

#### 1. **í—¤ë”ì™€ ë³¸ë¬¸ êµ¬ë¶„**
```
Content-Disposition: form-data; name="file"\r\n
Content-Type: image/jpeg\r\n
\r\n    â† ì´ ë¹ˆ ì¤„(CRLF)ì´ í—¤ë”ì™€ ë³¸ë¬¸ì„ êµ¬ë¶„!
[íŒŒì¼ ë°ì´í„° ì‹œì‘...]
```

#### 2. **Part ê²½ê³„ êµ¬ë¶„**
```
------boundary\r\n    â† boundary ë’¤ì˜ CRLF
[part ë‚´ìš©]
------boundary\r\n    â† ë‹¤ìŒ boundary ì•ì˜ CRLF
```

#### 3. **íŒŒì‹± ì •í™•ì„±**
CRLFë¥¼ ì œëŒ€ë¡œ ì²˜ë¦¬í•˜ì§€ ì•Šìœ¼ë©´:
- í—¤ë”ì— ë¶ˆí•„ìš”í•œ ë¬¸ìê°€ í¬í•¨ë¨
- Part ë°ì´í„°ê°€ ì˜ëª» ì¶”ì¶œë¨
- ë°”ì´ë„ˆë¦¬ íŒŒì¼ì´ ì†ìƒë¨

### 4.4 ì½”ë“œì—ì„œ CRLF ì²˜ë¦¬

```java
// ìš”ì²­ ë³¸ë¬¸ ì½ì„ ë•Œ CRLF ë³´ì¡´
private static String readRequestBody(HttpRequest request) throws IOException {
    StringBuilder sb = new StringBuilder();
    BufferedReader reader = request.getBody();
    String line;
    
    boolean first = true;
    while ((line = reader.readLine()) != null) {
        if (!first) {
            sb.append(CRLF);  // â† ì¤„ë°”ê¿ˆì„ CRLFë¡œ ë³µì›
        }
        sb.append(line);
        first = false;
    }
    
    return sb.toString();
}
```

---

## 5. MultipartParser ì½”ë“œ ìƒì„¸ ë¶„ì„

### 5.1 í´ë˜ìŠ¤ êµ¬ì¡°ì™€ ìƒìˆ˜ ì •ì˜

```java
public class MultipartParser {
    // HTTP multipart ê´€ë ¨ ìƒìˆ˜ë“¤
    private static final String BOUNDARY_PREFIX = "--";           // boundary ì•ì— ë¶™ëŠ” êµ¬ë¶„ì
    private static final String CONTENT_DISPOSITION = "Content-Disposition";  // íŒŒíŠ¸ ì •ë³´ í—¤ë”
    private static final String CONTENT_TYPE = "Content-Type";    // íŒŒì¼ íƒ€ì… í—¤ë”
    private static final String FORM_DATA = "form-data";          // í¼ ë°ì´í„° íƒ€ì…
    private static final String FILENAME = "filename";            // íŒŒì¼ëª… ì†ì„±
    private static final String NAME = "name";                    // í•„ë“œëª… ì†ì„±
    private static final String CRLF = "\r\n";                   // HTTP í‘œì¤€ ì¤„ë°”ê¿ˆ
}
```

### 5.2 ë©”ì¸ íŒŒì‹± ë©”ì„œë“œ

```java
/**
 * HttpRequestë¥¼ MultipartRequestë¡œ íŒŒì‹±í•©ë‹ˆë‹¤.
 * 
 * íŒŒì‹± ê³¼ì •:
 * 1. Content-Type ê²€ì¦ (multipart/form-dataì¸ì§€ í™•ì¸)
 * 2. boundary ì¶”ì¶œ
 * 3. ìš”ì²­ ë³¸ë¬¸ ì½ê¸°
 * 4. boundaryë¡œ partë“¤ ë¶„ë¦¬
 * 5. ê° partë¥¼ íŒŒì¼/ì¼ë°˜í•„ë“œë¡œ êµ¬ë¶„
 * 6. MultipartRequest ê°ì²´ ìƒì„±
 */
public static MultipartRequest parseRequest(HttpRequest request) throws IOException {
    // 1. Content-Type ê²€ì¦
    String contentType = request.getHeader("Content-Type");
    if (contentType == null || !contentType.toLowerCase().startsWith("multipart/form-data")) {
        throw new IllegalArgumentException("Request is not multipart/form-data");
    }
    
    // 2. boundary ì¶”ì¶œ - ê° partë¥¼ êµ¬ë¶„í•˜ëŠ” êµ¬ë¶„ì
    String boundary = extractBoundary(contentType);
    if (boundary == null) {
        throw new IllegalArgumentException("No boundary found in Content-Type");
    }
    
    // 3. ìš”ì²­ ë³¸ë¬¸ ì½ê¸° - CRLF ë³´ì¡´í•˜ë©° ì „ì²´ ë‚´ìš© ì½ê¸°
    String body = readRequestBody(request);
    
    // 4. ê¸°ì¡´ íŒŒë¼ë¯¸í„° ë³µì‚¬ ë° ìƒˆë¡œìš´ ì»¬ë ‰ì…˜ ì´ˆê¸°í™”
    Map<String, List<String>> parameters = new HashMap<>(request.getParameters());
    Map<String, List<MultipartFile>> files = new HashMap<>();
    
    // 5. boundaryë¡œ partë“¤ ë¶„ë¦¬í•˜ê³  íŒŒì‹±
    parseParts(body, boundary, parameters, files);
    
    // 6. íŒŒì‹± ê²°ê³¼ë¡œ MultipartRequest ìƒì„±
    return new MultipartRequest(
        request.getMethod(),
        request.getPath(),
        request.getHeaders(),
        parameters,
        request.getBody(),
        files
    );
}
```

### 5.3 Boundary ì¶”ì¶œ ë©”ì„œë“œ

```java
/**
 * Content-Type í—¤ë”ì—ì„œ boundaryë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.
 * 
 * ì˜ˆì‹œ:
 * Input: "multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW"
 * Output: "----WebKitFormBoundary7MA4YWxkTrZu0gW"
 * 
 * ì²˜ë¦¬ ê³¼ì •:
 * 1. ';'ë¡œ íŒŒë¼ë¯¸í„°ë“¤ ë¶„ë¦¬
 * 2. 'boundary=' ì°¾ê¸°
 * 3. ë”°ì˜´í‘œ ì œê±° (ìˆëŠ” ê²½ìš°)
 */
private static String extractBoundary(String contentType) {
    String[] parts = contentType.split(";");  // "multipart/form-data"ì™€ "boundary=XXX" ë¶„ë¦¬
    
    for (String part : parts) {
        part = part.trim();  // ê³µë°± ì œê±°
        
        if (part.startsWith("boundary=")) {
            String boundary = part.substring("boundary=".length()).trim();
            
            // RFCì— ë”°ë¼ boundaryëŠ” ë”°ì˜´í‘œë¡œ ê°ìŒ€ ìˆ˜ ìˆìŒ: boundary="----WebKit..."
            if (boundary.startsWith("\"") && boundary.endsWith("\"")) {
                boundary = boundary.substring(1, boundary.length() - 1);  // ë”°ì˜´í‘œ ì œê±°
            }
            
            return boundary;
        }
    }
    
    return null;  // boundaryë¥¼ ì°¾ì§€ ëª»í•¨
}
```

### 5.4 ìš”ì²­ ë³¸ë¬¸ ì½ê¸° ë©”ì„œë“œ

```java
/**
 * ìš”ì²­ ë³¸ë¬¸ì„ ë¬¸ìì—´ë¡œ ì½ìœ¼ë©´ì„œ CRLFë¥¼ ë³´ì¡´í•©ë‹ˆë‹¤.
 * 
 * ì¤‘ìš”í•œ ì :
 * - BufferedReader.readLine()ì€ ì¤„ë°”ê¿ˆ ë¬¸ìë¥¼ ì œê±°í•¨
 * - HTTPì—ì„œëŠ” CRLF(\r\n)ê°€ ì¤‘ìš”í•˜ë¯€ë¡œ ìˆ˜ë™ìœ¼ë¡œ ë³µì›í•´ì•¼ í•¨
 * - ì²« ë²ˆì§¸ ì¤„ ì•ì—ëŠ” CRLFë¥¼ ë¶™ì´ì§€ ì•ŠìŒ
 */
private static String readRequestBody(HttpRequest request) throws IOException {
    StringBuilder sb = new StringBuilder();
    BufferedReader reader = request.getBody();
    String line;
    
    boolean first = true;  // ì²« ë²ˆì§¸ ì¤„ ì²´í¬ìš©
    
    while ((line = reader.readLine()) != null) {
        if (!first) {
            sb.append(CRLF);  // ì´ì „ ì¤„ ëì— CRLF ì¶”ê°€
        }
        sb.append(line);      // í˜„ì¬ ì¤„ ë‚´ìš© ì¶”ê°€
        first = false;
    }
    
    return sb.toString();
}
```

### 5.5 Part ë¶„ë¦¬ ë©”ì„œë“œ

```java
/**
 * boundaryë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒíŠ¸ë¥¼ ë¶„ë¦¬í•˜ê³  íŒŒì‹±í•©ë‹ˆë‹¤.
 * 
 * Multipart êµ¬ì¡°:
 * --boundary
 * [part1 content]
 * --boundary
 * [part2 content]
 * --boundary--  (ì¢…ë£Œ)
 */
private static void parseParts(String body, String boundary, 
                             Map<String, List<String>> parameters,
                             Map<String, List<MultipartFile>> files) {
    
    // boundaryì— -- ì ‘ë‘ì‚¬ ì¶”ê°€ (HTTP í‘œì¤€)
    String delimiter = BOUNDARY_PREFIX + boundary;        // "--boundary"
    String endDelimiter = delimiter + BOUNDARY_PREFIX;    // "--boundary--"
    
    // ì²« ë²ˆì§¸ì™€ ë§ˆì§€ë§‰ boundary ìœ„ì¹˜ ì°¾ê¸°
    int startIndex = body.indexOf(delimiter);             // ì²« boundary ìœ„ì¹˜
    int endIndex = body.lastIndexOf(endDelimiter);        // ì¢…ë£Œ boundary ìœ„ì¹˜
    
    if (startIndex == -1) {
        return;  // boundaryë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ - ì˜ëª»ëœ í˜•ì‹
    }
    
    // ì‹¤ì œ ë‚´ìš© ë¶€ë¶„ë§Œ ì¶”ì¶œ (ì‹œì‘ boundary ì´í›„, ì¢…ë£Œ boundary ì´ì „)
    String content = body.substring(
        startIndex + delimiter.length(), 
        endIndex != -1 ? endIndex : body.length()
    );
    
    // delimiterë¡œ ê° part ë¶„ë¦¬
    String[] parts = content.split(delimiter);
    
    // ê° part ê°œë³„ ì²˜ë¦¬
    for (String part : parts) {
        part = part.trim();  // ì•ë’¤ ê³µë°± ì œê±°
        if (!part.isEmpty()) {
            parsePart(part, parameters, files);  // ê°œë³„ part íŒŒì‹±
        }
    }
}
```

### 5.6 ê°œë³„ Part íŒŒì‹± ë©”ì„œë“œ

```java
/**
 * ê°œë³„ íŒŒíŠ¸ë¥¼ íŒŒì‹±í•˜ì—¬ íŒŒì¼ ë˜ëŠ” ì¼ë°˜ íŒŒë¼ë¯¸í„°ë¡œ ë¶„ë¥˜í•©ë‹ˆë‹¤.
 * 
 * Part êµ¬ì¡°:
 * Content-Disposition: form-data; name="fieldname"; filename="file.txt"
 * Content-Type: text/plain
 * \r\n              â† í—¤ë”ì™€ ë³¸ë¬¸ êµ¬ë¶„í•˜ëŠ” ë¹ˆ ì¤„
 * [ì‹¤ì œ ë°ì´í„°]
 */
private static void parsePart(String part, 
                            Map<String, List<String>> parameters,
                            Map<String, List<MultipartFile>> files) {
    
    // 1. í—¤ë”ì™€ ë³¸ë¬¸ ë¶„ë¦¬
    int headerEndIndex = part.indexOf(CRLF + CRLF);  // ë¹ˆ ì¤„ ì°¾ê¸° (\r\n\r\n)
    if (headerEndIndex == -1) {
        return;  // ì˜¬ë°”ë¥´ì§€ ì•Šì€ part í˜•ì‹ - í—¤ë”ì™€ ë³¸ë¬¸ êµ¬ë¶„ì´ ì—†ìŒ
    }
    
    // í—¤ë” ì„¹ì…˜ê³¼ ë³¸ë¬¸ ì„¹ì…˜ ë¶„ë¦¬
    String headerSection = part.substring(0, headerEndIndex);
    String bodySection = part.substring(headerEndIndex + (CRLF + CRLF).length());
    
    // 2. í—¤ë” íŒŒì‹± (ì´ë¦„:ê°’ í˜•íƒœë¡œ ë³€í™˜)
    Map<String, String> headers = parseHeaders(headerSection);
    
    // 3. Content-Disposition í—¤ë” í™•ì¸
    String contentDisposition = headers.get(CONTENT_DISPOSITION.toLowerCase());
    if (contentDisposition == null || !contentDisposition.toLowerCase().contains(FORM_DATA)) {
        return;  // form-dataê°€ ì•„ë‹ˆë©´ ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ
    }
    
    // 4. í•„ë“œëª…ê³¼ íŒŒì¼ëª… ì¶”ì¶œ
    String name = extractAttribute(contentDisposition, NAME);          // name="fieldname"
    String filename = extractAttribute(contentDisposition, FILENAME);  // filename="file.txt"
    
    if (name == null) {
        return;  // í•„ë“œëª…ì´ ì—†ìœ¼ë©´ ë¬´ì‹œ
    }
    
    // 5. íŒŒì¼ vs ì¼ë°˜ íŒŒë¼ë¯¸í„° êµ¬ë¶„
    if (filename != null) {
        // íŒŒì¼ íŒŒë¼ë¯¸í„° - filename ì†ì„±ì´ ìˆìœ¼ë©´ íŒŒì¼
        String contentType = headers.get(CONTENT_TYPE.toLowerCase());
        byte[] fileContent = bodySection.getBytes(StandardCharsets.UTF_8);
        
        MultipartFile multipartFile = new StandardMultipartFile(
            name, filename, contentType, fileContent
        );
        
        // ê°™ì€ ì´ë¦„ì˜ íŒŒì¼ì´ ì—¬ëŸ¬ ê°œì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ List ì‚¬ìš©
        files.computeIfAbsent(name, k -> new ArrayList<>()).add(multipartFile);
    } else {
        // ì¼ë°˜ íŒŒë¼ë¯¸í„° - filenameì´ ì—†ìœ¼ë©´ í…ìŠ¤íŠ¸ í•„ë“œ
        parameters.computeIfAbsent(name, k -> new ArrayList<>()).add(bodySection);
    }
}
```

### 5.7 í—¤ë” íŒŒì‹± ë©”ì„œë“œ

```java
/**
 * í—¤ë” ì„¹ì…˜ì„ íŒŒì‹±í•˜ì—¬ ì´ë¦„:ê°’ ë§µìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
 * 
 * ì…ë ¥ ì˜ˆì‹œ:
 * Content-Disposition: form-data; name="file"; filename="test.txt"
 * Content-Type: text/plain
 * 
 * ì¶œë ¥: {"content-disposition": "form-data; name=\"file\"; filename=\"test.txt\"",
 *        "content-type": "text/plain"}
 */
private static Map<String, String> parseHeaders(String headerSection) {
    Map<String, String> headers = new HashMap<>();
    String[] lines = headerSection.split(CRLF);  // ê° ì¤„ë¡œ ë¶„ë¦¬
    
    for (String line : lines) {
        line = line.trim();
        if (line.isEmpty()) {
            continue;  // ë¹ˆ ì¤„ ë¬´ì‹œ
        }
        
        int colonIndex = line.indexOf(':');  // ':' ìœ„ì¹˜ ì°¾ê¸°
        if (colonIndex > 0) {  // ':' ê°€ ìˆê³  ì²« ë¬¸ìê°€ ì•„ë‹Œ ê²½ìš°
            String headerName = line.substring(0, colonIndex).trim().toLowerCase();
            String headerValue = line.substring(colonIndex + 1).trim();
            headers.put(headerName, headerValue);
        }
    }
    
    return headers;
}
```

### 5.8 ì†ì„± ì¶”ì¶œ ë©”ì„œë“œ

```java
/**
 * Content-Dispositionì—ì„œ íŠ¹ì • ì†ì„±ê°’ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
 * 
 * ì²˜ë¦¬ ê°€ëŠ¥í•œ í˜•íƒœ:
 * - name="value"     (ë”°ì˜´í‘œ ìˆìŒ)
 * - name=value       (ë”°ì˜´í‘œ ì—†ìŒ)
 * 
 * ì˜ˆì‹œ:
 * Input: 'form-data; name="file"; filename="test.txt"'
 * extractAttribute(input, "name") â†’ "file"
 * extractAttribute(input, "filename") â†’ "test.txt"
 */
private static String extractAttribute(String contentDisposition, String attributeName) {
    // 1. ë”°ì˜´í‘œê°€ ìˆëŠ” í˜•íƒœ ì°¾ê¸°: name="value"
    String pattern1 = attributeName + "=\"";
    String pattern2 = attributeName + "=";
    
    int startIndex = contentDisposition.indexOf(pattern1);
    if (startIndex != -1) {
        // name="value" í˜•íƒœ ì²˜ë¦¬
        startIndex += pattern1.length();                    // "name=\"" ë‹¤ìŒë¶€í„°
        int endIndex = contentDisposition.indexOf('"', startIndex);  // ë‹«ëŠ” ë”°ì˜´í‘œ ì°¾ê¸°
        if (endIndex != -1) {
            return contentDisposition.substring(startIndex, endIndex);
        }
    } else {
        // 2. ë”°ì˜´í‘œê°€ ì—†ëŠ” í˜•íƒœ ì°¾ê¸°: name=value
        startIndex = contentDisposition.indexOf(pattern2);
        if (startIndex != -1) {
            startIndex += pattern2.length();               // "name=" ë‹¤ìŒë¶€í„°
            int endIndex = contentDisposition.indexOf(';', startIndex);  // ë‹¤ìŒ ';' ë˜ëŠ” ëê¹Œì§€
            if (endIndex == -1) {
                endIndex = contentDisposition.length();    // ë§ˆì§€ë§‰ ì†ì„±ì¸ ê²½ìš°
            }
            return contentDisposition.substring(startIndex, endIndex).trim();
        }
    }
    
    return null;  // ì†ì„±ì„ ì°¾ì§€ ëª»í•¨
}
```

---

## 6. íŒŒì¼ ì—…ë¡œë“œ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 6.1 ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°

```
í´ë¼ì´ì–¸íŠ¸ (ë¸Œë¼ìš°ì €)
        â†“ Multipart HTTP Request
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Dispatcher               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   Multipart ìš”ì²­ ê°ì§€       â”‚â”‚
â”‚  â”‚   Content-Type í™•ì¸         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     MultipartParser             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   Boundary ì¶”ì¶œ             â”‚â”‚
â”‚  â”‚   Part ë¶„ë¦¬                 â”‚â”‚
â”‚  â”‚   í—¤ë”/ë³¸ë¬¸ íŒŒì‹±            â”‚â”‚
â”‚  â”‚   íŒŒì¼/í…ìŠ¤íŠ¸ êµ¬ë¶„          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MultipartRequest             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   íŒŒì¼ ë§µ ê´€ë¦¬              â”‚â”‚
â”‚  â”‚   íŒŒë¼ë¯¸í„° ë§µ ê´€ë¦¬          â”‚â”‚
â”‚  â”‚   MultipartFile ê°ì²´ë“¤      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ParameterResolver             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   @RequestParam ì²˜ë¦¬        â”‚â”‚
â”‚  â”‚   MultipartFile ë°”ì¸ë”©      â”‚â”‚
â”‚  â”‚   ë©”ì„œë“œ íŒŒë¼ë¯¸í„° ìƒì„±      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Controller                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   íŒŒì¼ ì €ì¥ ë¡œì§            â”‚â”‚
â”‚  â”‚   ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬        â”‚â”‚
â”‚  â”‚   ì‘ë‹µ ìƒì„±                 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ë°ì´í„° íë¦„

```
1. í´ë¼ì´ì–¸íŠ¸ ìš”ì²­
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ POST /upload HTTP/1.1           â”‚
   â”‚ Content-Type: multipart/form-data; boundary=XXX
   â”‚ Content-Length: 12345           â”‚
   â”‚                                 â”‚
   â”‚ --XXX                           â”‚
   â”‚ Content-Disposition: form-data; name="file"; filename="image.jpg"
   â”‚ Content-Type: image/jpeg        â”‚
   â”‚                                 â”‚
   â”‚ [ë°”ì´ë„ˆë¦¬ ë°ì´í„°...]           â”‚
   â”‚ --XXX--                         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. Dispatcher ì²˜ë¦¬
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ if (isMultipartRequest()) {     â”‚
   â”‚     MultipartRequest req =      â”‚
   â”‚         MultipartParser.parse(request);
   â”‚     // íŒŒì‹±ëœ ìš”ì²­ìœ¼ë¡œ ë³€í™˜     â”‚
   â”‚ }                               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. MultipartParser íŒŒì‹±
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 1. boundary ì¶”ì¶œ               â”‚
   â”‚ 2. ë³¸ë¬¸ì„ boundaryë¡œ ë¶„ë¦¬      â”‚
   â”‚ 3. ê° partì˜ í—¤ë” íŒŒì‹±         â”‚
   â”‚ 4. íŒŒì¼/í…ìŠ¤íŠ¸ êµ¬ë¶„            â”‚
   â”‚ 5. MultipartFile ê°ì²´ ìƒì„±     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. ParameterResolver ë°”ì¸ë”©
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ @RequestParam("file")           â”‚
   â”‚ MultipartFile file              â”‚
   â”‚   â†“                             â”‚
   â”‚ multipartRequest.getFile("file")â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5. Controller ì²˜ë¦¬
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ public String upload(           â”‚
   â”‚   @RequestParam("file") MultipartFile file
   â”‚ ) {                             â”‚
   â”‚     file.transferTo(new File(...));
   â”‚     return "success";           â”‚
   â”‚ }                               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 ì£¼ìš” ì»´í¬ë„ŒíŠ¸ ì—­í• 

#### MultipartFile ì¸í„°í˜ì´ìŠ¤
```java
public interface MultipartFile {
    String getName();           // í¼ í•„ë“œëª…
    String getOriginalFilename(); // ì›ë³¸ íŒŒì¼ëª…
    String getContentType();    // MIME íƒ€ì…
    long getSize();            // íŒŒì¼ í¬ê¸°
    byte[] getBytes();         // íŒŒì¼ ë‚´ìš©
    void transferTo(File dest); // íŒŒì¼ ì €ì¥
}
```

#### StandardMultipartFile êµ¬í˜„ì²´
```java
public class StandardMultipartFile implements MultipartFile {
    private final String name;          // í¼ í•„ë“œëª…
    private final String originalFilename; // ì›ë³¸ íŒŒì¼ëª…
    private final String contentType;   // MIME íƒ€ì…
    private final byte[] content;       // íŒŒì¼ ë°ì´í„°
    
    // íŒŒì¼ ì €ì¥, ìŠ¤íŠ¸ë¦¼ ì œê³µ ë“±ì˜ ê¸°ëŠ¥ êµ¬í˜„
}
```

---

## 7. í•µì‹¬ ì§ˆë¬¸ë“¤ì— ëŒ€í•œ ë‹µë³€

### Q1: CRLFë¥¼ ì—†ì• ëŠ” ì´ìœ ê°€ ë¬´ì—‡ì¸ê°€?

**ì •í™•íˆëŠ” "ì—†ì• ëŠ”" ê²ƒì´ ì•„ë‹ˆë¼ "ë³´ì¡´"í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.**

```java
// BufferedReader.readLine()ì€ ì¤„ë°”ê¿ˆ ë¬¸ìë¥¼ ì œê±°í•©ë‹ˆë‹¤
String line = reader.readLine(); // "Content-Type: image/jpeg" (CRLF ì œê±°ë¨)

// í•˜ì§€ë§Œ HTTPì—ì„œëŠ” CRLFê°€ ì¤‘ìš”í•˜ë¯€ë¡œ ìˆ˜ë™ìœ¼ë¡œ ë³µì›í•´ì•¼ í•©ë‹ˆë‹¤
if (!first) {
    sb.append(CRLF);  // ì´ì „ ì¤„ ëì— CRLF ì¶”ê°€
}
sb.append(line);      // í˜„ì¬ ì¤„ ì¶”ê°€
```

**ì´ìœ :**
1. **HTTP í‘œì¤€ ì¤€ìˆ˜**: HTTPëŠ” CRLF(\r\n)ë¥¼ ì¤„ë°”ê¿ˆìœ¼ë¡œ ì‚¬ìš©
2. **í—¤ë”/ë³¸ë¬¸ êµ¬ë¶„**: `\r\n\r\n`ìœ¼ë¡œ í—¤ë”ì™€ ë³¸ë¬¸ì„ êµ¬ë¶„
3. **ë°”ì´ë„ˆë¦¬ ë°ì´í„° ë³´ì¡´**: íŒŒì¼ ë‚´ìš©ì˜ ì¤„ë°”ê¿ˆë„ ì •í™•íˆ ë³´ì¡´í•´ì•¼ í•¨

### Q2: Boundaryë€ ë¬´ì—‡ì¸ê°€?

**BoundaryëŠ” multipart ë©”ì‹œì§€ì—ì„œ ê° partë¥¼ êµ¬ë¶„í•˜ëŠ” ê³ ìœ í•œ ë¬¸ìì—´ì…ë‹ˆë‹¤.**

```
ì‹¤ì œ ì˜ˆì‹œ:
------WebKitFormBoundary7MA4YWxkTrZu0gW    â† Part 1 ì‹œì‘
[Part 1 ë‚´ìš©]
------WebKitFormBoundary7MA4YWxkTrZu0gW    â† Part 1 ë, Part 2 ì‹œì‘
[Part 2 ë‚´ìš©]  
------WebKitFormBoundary7MA4YWxkTrZu0gW--  â† Part 2 ë, ë©”ì‹œì§€ ì¢…ë£Œ
```

**íŠ¹ì§•:**
- ë©”ì‹œì§€ ë‚´ìš©ì— ë‚˜íƒ€ë‚˜ì§€ ì•ŠëŠ” ê³ ìœ í•œ ë¬¸ìì—´
- ë¸Œë¼ìš°ì €ê°€ ëœë¤í•˜ê²Œ ìƒì„±
- RFC 2046 í‘œì¤€ì„ ë”°ë¦„

### Q3: parsePartsì—ì„œ boundaryë¡œ íŒŒíŠ¸ë¥¼ ë¶„ë¦¬í•˜ëŠ” ì´ìœ ?

**Multipart ë©”ì‹œì§€ëŠ” boundaryë¡œë§Œ ê° partë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.**

```java
// ì˜ëª»ëœ ë°©ë²•: ë‹¨ìˆœ ë¬¸ìì—´ ë¶„ë¦¬
String[] parts = body.split("\n");  // âŒ íŒŒì¼ ë‚´ìš©ì—ë„ \nì´ ìˆì„ ìˆ˜ ìˆìŒ

// ì˜¬ë°”ë¥¸ ë°©ë²•: boundaryë¡œ ë¶„ë¦¬  
String[] parts = content.split(delimiter);  // âœ… boundaryëŠ” ê³ ìœ í•˜ë¯€ë¡œ ì•ˆì „
```

**ì´ìœ :**
1. **ê³ ìœ ì„±**: BoundaryëŠ” ë©”ì‹œì§€ ë‚´ìš©ì— ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ
2. **í‘œì¤€ ì¤€ìˆ˜**: RFC 2388 multipart í‘œì¤€
3. **ì•ˆì „ì„±**: íŒŒì¼ ë‚´ìš©ê³¼ êµ¬ë¶„ìê°€ ê²¹ì¹˜ì§€ ì•ŠìŒ

### Q4: -1ì˜ ì˜ë¯¸ëŠ”?

**Javaì—ì„œ `indexOf()`, `lastIndexOf()` ë©”ì„œë“œê°€ ì°¾ëŠ” ë¬¸ìì—´ì´ ì—†ì„ ë•Œ ë°˜í™˜í•˜ëŠ” ê°’ì…ë‹ˆë‹¤.**

```java
int startIndex = body.indexOf(delimiter);     // boundaryë¥¼ ëª» ì°¾ìœ¼ë©´ -1
int endIndex = body.lastIndexOf(endDelimiter); // ì¢…ë£Œ boundaryë¥¼ ëª» ì°¾ìœ¼ë©´ -1

if (startIndex == -1) {
    return;  // boundaryê°€ ì—†ë‹¤ = ì˜ëª»ëœ multipart í˜•ì‹
}

// ì¢…ë£Œ boundaryê°€ ì—†ì–´ë„ ì²˜ë¦¬ ê°€ëŠ¥ (ì„ íƒì )
String content = body.substring(
    startIndex + delimiter.length(), 
    endIndex != -1 ? endIndex : body.length()  // -1ì´ë©´ ëê¹Œì§€
);
```

**ì˜ë¯¸:**
- `startIndex == -1`: ì‹œì‘ boundaryê°€ ì—†ìŒ â†’ ì˜ëª»ëœ í˜•ì‹
- `endIndex == -1`: ì¢…ë£Œ boundaryê°€ ì—†ì–´ë„ ì²˜ë¦¬ ê°€ëŠ¥

### Q5: CRLFë¥¼ ìì£¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?

**HTTPì™€ MIME í‘œì¤€ì—ì„œ ì¤„ë°”ê¿ˆìœ¼ë¡œ CRLFë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.**

```java
private static final String CRLF = "\r\n";

// ì‚¬ìš© ì˜ˆì‹œë“¤:
int headerEndIndex = part.indexOf(CRLF + CRLF);  // í—¤ë” ë ì°¾ê¸°
String[] lines = headerSection.split(CRLF);      // í—¤ë” ì¤„ë³„ ë¶„ë¦¬
sb.append(CRLF);                                 // ì¤„ë°”ê¿ˆ ì¶”ê°€
```

**ì´ìœ :**
1. **HTTP í‘œì¤€**: RFC 2616ì—ì„œ CRLF ì‚¬ìš© ê·œì •
2. **í˜¸í™˜ì„±**: ëª¨ë“  ì‹œìŠ¤í…œì—ì„œ ë™ì¼í•˜ê²Œ ì²˜ë¦¬
3. **ì •í™•ì„±**: ë‹¤ë¥¸ ì¤„ë°”ê¿ˆ ë¬¸ì ì‚¬ìš© ì‹œ íŒŒì‹± ì˜¤ë¥˜ ë°œìƒ
4. **ë°”ì´ë„ˆë¦¬ ì•ˆì „ì„±**: íŒŒì¼ ë‚´ìš© ì†ìƒ ë°©ì§€

---



### 1. ì„±ëŠ¥ ìµœì í™” ê³ ë ¤ì‚¬í•­
- **ëŒ€ìš©ëŸ‰ íŒŒì¼**: ë©”ëª¨ë¦¬ì— ëª¨ë‘ ë¡œë“œí•˜ì§€ ì•Šê³  ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬
- **ì„ì‹œ íŒŒì¼**: í° íŒŒì¼ì€ ì„ì‹œ íŒŒì¼ë¡œ ì €ì¥ í›„ ì²˜ë¦¬
- **ë©€í‹°ìŠ¤ë ˆë”©**: ì—¬ëŸ¬ íŒŒì¼ ë™ì‹œ ì—…ë¡œë“œ ì²˜ë¦¬

### 2. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­
- **íŒŒì¼ í¬ê¸° ì œí•œ**: DoS ê³µê²© ë°©ì§€
- **íŒŒì¼ íƒ€ì… ê²€ì¦**: ì‹¤ì œ íŒŒì¼ ë‚´ìš©ê³¼ í™•ì¥ì ì¼ì¹˜ í™•ì¸
- **ê²½ë¡œ ì¡°ì‘ ë°©ì§€**: íŒŒì¼ëª…ì—ì„œ `../` ë“± ì œê±°
- **ë°”ì´ëŸ¬ìŠ¤ ìŠ¤ìº”**: ì—…ë¡œë“œëœ íŒŒì¼ ê²€ì‚¬

### 3. ì—ëŸ¬ ì²˜ë¦¬
- **ì˜ëª»ëœ boundary**: íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€
- **ì†ìƒëœ ë°ì´í„°**: í—¤ë” íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì²˜ë¦¬
- **ìš©ëŸ‰ ì´ˆê³¼**: íŒŒì¼ í¬ê¸° ì œí•œ ì´ˆê³¼ ì‹œ ì²˜ë¦¬